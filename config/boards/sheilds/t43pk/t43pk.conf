# 1. 基础省电（所有 ZMK 键盘都建议关）
CONFIG_ZMK_SLEEP=y                          # 开启深度睡眠（最省电）
CONFIG_ZMK_IDLE_TIMEOUT=15000               # 15 秒无操作就睡眠（可改成 10000=10秒）
CONFIG_BT_MAX_CONN=1                        # 只需要连一台设备就够了
CONFIG_BT_DIS_TO_IDLE_TIMEOUT_MS=600000     # 断开蓝牙 10 分钟后彻底关无线（省电）
CONFIG_ZMK_BLE=y
CONFIG_BT_CENTRAL=n                         # 不做主机模式
CONFIG_BT_PERIPHERAL=y

# 2. 关掉你完全用不到的功能（T43 拆机键盘基本都不带）
CONFIG_ZMK_RGB_UNDERGLOW=n                  # 没灯关掉
CONFIG_ZMK_BACKLIGHT=n                      # 没背光关掉
CONFIG_ZMK_DISPLAY=n                        # 没接 OLED 就关（接了再删这行）
CONFIG_ZMK_BATTERY_REPORT=n                 # 不显示电量（省几µA，接 OLED 再开）
CONFIG_ZMK_EXT_POWER=y                      # 保留外接电源检测（防止充电时误睡眠）

# 3. 键盘扫描优化（对 MCP23017 尤其重要）
CONFIG_ZMK_SCAN_DEBOUNCE_PRESS_MS=3         # 去抖时间 3ms 足够（原厂就是 2~5ms）
CONFIG_ZMK_SCAN_DEBOUNCE_RELEASE_MS=3
CONFIG_ZMK_KSCAN_DIRECT_PINS=n              # 我们用的是 MCP23017，不是直连 GPIO
CONFIG_ZMK_KSCAN_GPIO_MCP23017=y            # 必须开

# 4. MCP23017 专用省电（非常关键！）
CONFIG_MCP23017_TRIGGER_NONE=y              # 不用中断触发，轮询就行（省一根 INT 线）
CONFIG_MCP23017_PULL_UP=y                   # 用芯片内部上拉（我们已经在 overlay 里写了）
CONFIG_MCP23017_LOW_POWER=y                 # 开启低功耗模式（实测能省 15~20µA）

# 5. 蓝牙广播优化（T43 风格）
CONFIG_BT_DEVICE_NAME="T43 Keyboard"        # 蓝牙名字改成这个，帅
CONFIG_BT_DEVICE_APPEARANCE=961             # 标准键盘外观（961=Keyboard）
CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=n       # 不自动清除配对（防止误操作）

# 6. 其他杂项（根据实际情况删）
# CONFIG_ZMK_MOUSE=n                        # 没接 TrackPoint 就关（接了删这行）
# CONFIG_ZMK_POINTING_DEVICE=n             # 同上
# CONFIG_ZMK_SPLIT=n                        # 不是分体键盘
# CONFIG_ZMK_LOG_LEVEL=0                    # 关掉所有日志（省电 + 刷机体积更小）

# 7. 如果你接了 TrackPoint（PS/2 或 UART 版），把下面几行删掉或改成 y
CONFIG_ZMK_MOUSE=n
CONFIG_PS2_MOUSE=n
CONFIG_ZMK_TRACKPOINT=n